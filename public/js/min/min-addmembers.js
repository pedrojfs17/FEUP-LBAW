const membersSearchBar=document.getElementById("searchMembers"),membersSearchButton=document.getElementById("button-search-members"),membersDiv=document.getElementById("members"),membersSpinner=document.getElementById("membersSpinner"),addedMembers=document.getElementById("added-members");function receivedMembersInvite(e){membersDiv.innerHTML=JSON.parse(e),membersSpinner.classList.add("d-none"),document.querySelectorAll(".add-member-btn").forEach(function(e){e.addEventListener("click",function(){let t=new XMLHttpRequest;t.open("POST","/api/project/"+document.getElementById("addMembers").dataset.project+"/invite",!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(encodeForAjax({_token:document.querySelector('input[name="_token"]').value,client:e.dataset.id}));let n=e.parentElement.parentElement;addedMembers.appendChild(n),n.querySelector("button").remove()})});let t=document.getElementsByClassName("paginator-link");Array.from(t).forEach(e=>e.addEventListener("click",function(){membersDiv.innerHTML="",membersSpinner.classList.remove("d-none"),sendGetMembersInviteRequest(e.dataset.href+"&project="+document.getElementById("addMembers").dataset.project)}))}function sendGetMembersInviteRequest(e){let t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&(200===t.status?receivedMembersInvite(this.responseText):alert("There was an error "+t.status))},t.open("GET",e,!0),t.setRequestHeader("Accept","application/json"),t.send()}membersSearchBar.addEventListener("keyup",function(){membersDiv.innerHTML="",membersSpinner.classList.remove("d-none"),sendGetMembersInviteRequest(membersSearchButton.dataset.href+"&query="+membersSearchBar.value.trim())}),membersSearchButton.addEventListener("click",function(){membersDiv.innerHTML="",membersSpinner.classList.remove("d-none"),sendGetMembersInviteRequest(membersSearchButton.dataset.href+"&query="+membersSearchBar.value.trim())});
