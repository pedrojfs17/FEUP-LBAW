const projectFilter=document.querySelector("#projectFilter"),tagsSelect=document.querySelector("#completion-selection"),submitFilter=document.querySelector("#projectFilterSubmit");function getProjectActiveFilters(){let e={},t=new FormData(projectFilter);return t.forEach((r,n)=>{e[n]=t.getAll(n)}),e}function sendGetAjaxRequest(e){let t=new XMLHttpRequest;t.open("GET",e),t.setRequestHeader("Accept","application/json"),t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&(200===t.status?buildFilteredTasks(t.responseText):console.log("There was an error "+t))},t.send()}function encodeForAjax(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}function buildFilteredTasks(e){const t=document.querySelector("#projects");t.innerHTML="";let r=document.createElement("div");r.innerHTML=JSON.parse(e),Array.from(r.children).forEach(e=>t.append(e));let n=document.getElementsByClassName("paginator-link");Array.from(n).forEach(e=>e.addEventListener("click",function(){projectsDiv.innerHTML="",projectsSpinner.classList.remove("d-none"),sendGetRequest(e.dataset.href+"&"+encodeForAjax(getProjectActiveFilters()))}))}submitFilter.addEventListener("click",function(e){projectFilter.querySelector('button[type="submit"]').click()}),projectFilter.addEventListener("submit",function(e){e.preventDefault();let t={},r=new FormData(projectFilter);r.forEach((e,n)=>{t[n]=r.getAll(n)}),sendGetAjaxRequest(projectFilter.dataset.href+"?"+encodeForAjax(t))});
